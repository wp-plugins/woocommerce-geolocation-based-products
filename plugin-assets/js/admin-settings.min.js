jQuery(document).ready(function(e){"use strict";e.wc_geolocation_based_products_admin={runChosen:function(){e("select.wc-geolocation-based-products-choose-products").each(function(){e(this).ajaxChosen({method:"GET",url:wc_geolocation_based_products_local.ajaxURL,dataType:"json",afterTypeDelay:100,data:{action:"wc_geolocation_based_products_search_products_ajax",security:wc_geolocation_based_products_local.ajaxProductSearchNonce}},function(t){var n={};e.each(t,function(e,t){n[e]=t});return n}).next(".chosen-container").eq(0).css("width","100%");e(this).next(".chosen-container").find(".search-field input").css("width","auto")});e("select.wc-geolocation-based-products-choose-product-categories").each(function(){e(this).chosen({allow_single_deselect:"true",width:"100%"})})},reInitRows:function(){e("table.wc-geolocation-based-products-settings").find("tr.entry").each(function(t){var n=String(e("input.wc-geolocation-based-products-country",this).prop("name")),r=n.replace(/row\[\d+\]/,"row["+t+"]");e("input.wc-geolocation-based-products-country",this).prop("name",r);n=String(e("input.wc-geolocation-based-products-region",this).prop("name"));r=n.replace(/row\[\d+\]/,"row["+t+"]");e("input.wc-geolocation-based-products-region",this).prop("name",r);n=String(e("input.wc-geolocation-based-products-city",this).prop("name"));r=n.replace(/row\[\d+\]/,"row["+t+"]");e("input.wc-geolocation-based-products-city",this).prop("name",r);n=String(e("select.wc-geolocation-based-products-choose-products",this).prop("name"));r=n.replace(/row\[\d+\]/,"row["+t+"]");e("select.wc-geolocation-based-products-choose-products",this).prop("name",r);n=String(e("select.wc-geolocation-based-products-choose-product-categories",this).prop("name"));r=n.replace(/row\[\d+\]/,"row["+t+"]");e("select.wc-geolocation-based-products-choose-product-categories",this).prop("name",r);n=String(e("input.wc-geolocation-based-products-test",this).prop("name"));r=n.replace(/row\[\d+\]/,"row["+t+"]");e("input.wc-geolocation-based-products-test",this).prop("name",r)})},init:function(){e.wc_geolocation_based_products_admin.runChosen();e("table.wc-geolocation-based-products-settings").on("click",".insert-row",function(t){t.preventDefault();var n=e(this).parents("table.wc-geolocation-based-products-settings"),r=n.find("tr.entry").eq(0).clone();r.find("select.wc-geolocation-based-products-choose-products").css("display","block").val("").removeClass("chzn-done").next(".chosen-container").remove();r.find("select.wc-geolocation-based-products-choose-product-categories").css("display","block").val("").removeClass("chzn-done").next(".chosen-container").remove();r.find(".wc-geolocation-based-products-remove-row").prop("checked",false);r.find(".wc-geolocation-based-products-test").prop("checked",false);r.find(".wc-geolocation-based-products-country").val("");r.find(".wc-geolocation-based-products-region").val("");r.find(".wc-geolocation-based-products-city").val("");n.find("tbody").append(r);e.wc_geolocation_based_products_admin.runChosen();e.wc_geolocation_based_products_admin.reInitRows();r.find("select.wc-geolocation-based-products-choose-product-categories option").prop("selected",false).parents("select.wc-geolocation-based-products-choose-product-categories").trigger("chosen:updated");r.find("select.wc-geolocation-based-products-choose-products option").prop("selected",false).parents("select.wc-geolocation-based-products-choose-products").trigger("chosen:updated")});e("table.wc-geolocation-based-products-settings").on("click",".remove-row",function(t){t.preventDefault();var n=e(this).parents("table.wc-geolocation-based-products-settings");n.find(".wc-geolocation-based-products-remove-row:checked").each(function(){if(n.find("tr.entry").length===1){n.find(".wc-geolocation-based-products-remove-row").prop("checked",false);n.find(".wc-geolocation-based-products-test").prop("checked",false);n.find(".wc-geolocation-based-products-country").val("");n.find(".wc-geolocation-based-products-region").val("");n.find(".wc-geolocation-based-products-city").val("");n.find("select.wc-geolocation-based-products-choose-products").val("").trigger("chosen:updated");n.find("select.wc-geolocation-based-products-choose-product-categories").val("").trigger("chosen:updated")}else{e(this).parents("tr.entry").eq(0).remove()}});e.wc_geolocation_based_products_admin.reInitRows()});e("table.wc-geolocation-based-products-settings").on("click",".wc-geolocation-based-products-test",function(){e(this).parents("table.wc-geolocation-based-products-settings").find(".wc-geolocation-based-products-test").not(this).prop("checked",false);return true})}};e.wc_geolocation_based_products_admin.init()})